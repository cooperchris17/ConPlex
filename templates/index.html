<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Construction Complexity Calculator</title>
    <script>
        function showProcessingMessage() {
            document.getElementById('processing-message').style.display = 'block';
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            showProcessingMessage();

            const formData = new FormData(event.target);
            fetch('/process', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById('processing-message').innerHTML = data;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('processing-message').innerHTML = 'An error occurred during processing.';
            });
        }
    </script>
</head>
<body>
    <h1>Construction Complexity Calculator</h1>
    <p>This tool calculates the complexity measure described in Nelson (2024).</p>
    <p>Read the Open Access paper for full details about the complexity measure and please cite it in your research if you use the tool:</p>
    <p>Nelson, R. (2024). Using constructions to measure developmental language complexity. Cognitive Linguistics. <a href="https://doi.org/10.1515/cog-2023-0062">https://doi.org/10.1515/cog-2023-0062</a></p>
    <br>
    <p>For multiple texts, click "upload" and select the .txt files. For one text, paste it into the box. When your texts are ready, click "Process Input".</p>
    <form action="/process" method="post" enctype="multipart/form-data" onsubmit="handleFormSubmit(event)">
        <label for="text">Input text:</label><br>
        <textarea id="text" name="text" rows="10" cols="50" placeholder="Copy and paste text here"></textarea><br><br>
        <label for="files">Upload files:</label><br>
        <input type="file" id="files" name="files" multiple accept=".txt"><br><br>
        <input type="submit" value="Process Input">
    </form>
    <p id="processing-message" style="display:none;">Files processing (this could take some time)...</p>
</body>
</html>
